---
layout: post
title: '编程的奇妙'
date: 2014-12-01 02:01
comments: true
categories: [Python, bit, singlenum2]
---
#背景
编程真是一个很奇妙的事情，感觉有点像研究数学，一些问题很奇妙，对于解法毫无眉毛。但是当你深入钻研下去，摸索出思路，渐渐将思路成型验证，最后在纸上解答出来，看到成果通过被验证的那一刻的感觉，真是谁试谁知道。
每天一题leetcode还在进行中，上周五做的一题，百思不得其解，自己只能用很愚蠢的方式完成，然后便网上搜索别人的解法，发现这思路真棒，但是有这思路还要能用程序去实现，也有一定难度，总之就是狠天高啊，自己怎么就想不到。
#题目
Given an array of integers, every element appears three times except for one. Find that single one.
#思考
这题之前还有道题是每个数出现两次，除了有一个出现一次，找到他。那题相对容易，第一反应就是用位运算，相同的数异或后一定是0，那全部数都异或一次，结果就是那个不同的数了。
但是，现在这题是两次，思考良久用位运算好像没什么办法，就只能用一个pc去计数，这样的时间复杂度是O(2n),用了一个dict的额外空间，但是结果accept了。
不放弃，还是想看看是否有聪明的解法，谷歌之。发现，这高人的思路真是奇妙啊。
#解法
之前被限制无法用位运算是因为2进制，1+1就进1了，其实leetcode已经给你提示了，按这思路往下思考。那么为什么不用3进制运算了，1+1+1那么就是0了啊。
比如：3331222转换成二进制为：11 11 11 01 10 10 10。在第1位上，1出现了4次。第2位上，1出现了6次。那么第一位上3个一进位后就剩1，第二位上6个1结果就是0。那么合起来就是01，那结果就是1了。
但是，编程语言提供的数字类型只有二进制、八进制、十进制、十六进制，怎么实现3进制呢？
解题者思维方式真是不同寻常，他用2个位来实现进制。比如8这个数，3进制就应该是22，那么每位用两个二进制表示就是10 10。那么，高位合起来就是11，低位合起来就是00，那么高位即为3，低位为0。
#代码
但是还是不知道怎么用程序实现啊，那么具体来看代码吧，也看看代码中的注释。

```python
# coding=utf-8
class Solution:
    # @param A, a list of integer
    # @return an integer
    def singleNumber(self, A):
        one = 0; two = 0; three = 0
        for i in range(len(A)):
            #和低位与操作，结果为进位结果。如果都为1则进位结果为1，否则进位结果不为0
            #然后当two为1时，不管进位结果为什么，two都为1。如果two为0，则进位为1则为1
            two |= A[i] & one
            #异或操作，都是1就进位，低位one则清0
            one = A[i] ^ one
            #以下三步的意思是：如果one和two都为1时，就清0，反之则保持原来状态。
            three = ~(one & two)
            one &= three
            two &= three
        return one

```