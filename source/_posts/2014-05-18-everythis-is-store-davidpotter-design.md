---
layout: post
title: 'Everythis is store----DavidPotter的设计'
date: 2014-05-18 12:29
comments: true
categories: [Amazon, bezos, 设计, 责任链, KataPotter, 一网打尽]
---
一网打尽
---------------------------
##Bezos新看法
最近在看《Everything is store》这本书，暂时只看到Amazon新世纪前的艰难处境，这让我看到了Bezos的另一面：他吝啬，不给员工交保险；他主观，他认为员工就应该为了亚马逊的千秋万代不停的工作；他强势，他和乔布斯一样有不可思议的现实扭曲能力；他敏捷，他发现商机后往往是立马行动，不留下一点拖沓；他精明，善于在规则中发现漏洞，并钻这个空子；他谨慎，几乎没有人知道他的计划，包括他的合伙人和投资商；他无情，他让员工放弃家庭为他工作；他厚道，就算离开原有公司，也遵守着约定，并没有带走原公司的员工；他有感染力，他可以放开心的大笑；他是毒药，他的大笑让你失去防备。
一点载记，来自于《Everything is store》
>亚马逊当时还没有那么大的销售量，贝佐斯却为当初克服困难的勇气而津津乐道。他说：“我们发现了批发商订购规则的一个漏洞，他们的系统是这样设计的，你没有必要真买10本书，但你必须至少订10本书。我们发现有一本书，是描写‘地衣’的，系统里面有，但脱销了。我们开始订购1本我们想要的书，还有另外9本‘地衣’。然后他们会运来我们需要的那本书，并附上一张纸条，‘抱歉，我们的书脱销了。’”

>如果一位有潜力的应聘者想在工作和家庭之间寻找平衡，那他就大错特错了，贝索斯肯定会把他拒之门外。

>渐渐地，CEO向他的员工展示真是的自我，感染人的大笑、秃秃的头顶和神经质的举止。他异乎寻常的自信，比想象中还要固执。他近乎偏执地认为，员工都要不知疲倦得卖命，并且经常要大发豪言壮语。他一直雄心勃勃，但却行事谨慎，一些计划有时甚至连卡芬都蒙在鼓里。

>Bezos最终命令他们停止这样做，因为这（员工通过服务器查看订单的每日增长情况）给服务器增加了更多的压力。当亚马逊第一次突破单日5000美元的订单时，拉夫乔伊建议搞个聚会，Bezos也没答应。他说：“将来会有很多有意义的事情，我不想这样庆祝”。

>你可以超时工作、勤奋工作、动脑工作，但在亚马逊，你必须三选二。

>Bezos再一次强调紧迫性：领先的企业现在要保持这种紧迫的状态，只有保持领先地位才能为顾客停工最优质的服务。

>当然，这意味着亚马逊的每位员工都必须加倍努力。今后就没有任何公休日可言了，包括周末。在这里没人说你不能休周末，也没有人认为你可以休周末。

DavidPotter
-------------------------------
##设计
上篇博文中已经说了题目的含义。但是后来设计的时候觉得，如果按那样设计，一个购物车，有x本书，用n种折扣处理，处理后可能会出现y（y根据剩余书系列类别书和n决定）种情况的新购物车，然后再回头开始，用n中折扣处理。
我觉得这样设计带来的时间复杂度提升太严重了。而且这种设计只是为了未来可能的扩展要求。因此，我用一种简单的方式实现，暂时之前只有最后两层出现5本书折扣和3本书折扣的时候会出现用2次四折处理会便宜0.4元，就对这个特殊情况，我用一个特殊的handler处理下就好了。之后如果折扣变更有新的需要，用责任链设计模式也可以很方便的热拔插进一个新的handler。
##类图
![](http://i1.tietuku.com/13ad8e00f1cf9723s.png)
可以看出，设计都是面向抽象，而不是具体实现。计算器Calc依赖于计算策略、购物车、购物车工厂、处理器，购物车依赖于书的系列，系列再依赖于书。处理器使用责任链的方式组合。
##其他
这篇文章暂就介绍到这里，下篇再具体介绍代码。另外这次的代码实现还会用BDD的方式来完成。
